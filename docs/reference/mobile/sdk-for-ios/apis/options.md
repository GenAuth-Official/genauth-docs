# 可选参数

<LastUpdated/>

## LoginOptions

登录可选参数

| 名称                | 类型         | <div style="width:80px">是否必填</div> | <div style="width:300px">描述</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | <div style="width:200px">示例值</div> |
| ------------------- | ------------ | -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- |
| scope               | String       | 否                                     | 需要请求的权限，必须包含 `openid`。如果需要获取手机号和 email 需要包含 `phone` `email`；如果需要 refresh_token 需要包含 `offline_access`。多个 `scope` 请用空格分隔。`id_token` 解码后的内容中会包含这些 `scope` 对应的用户信息相关的字段。<br> - `openid`: 必须包含。<br> - `profile`: 返回 `birthdate`、`family_name`、`gender`、`given_name`、`locale`，`middle_name`、`name`、`nickname`、`picture`、`preferred_username`、`profile`，`updated_at`、`website`、`zoneinfo` 字段。<br>- `username`: 返回 `username`。<br>- `email`: 返回 `email`、`email_verified`。<br>- `phone`: 返回 `phone_number`、`phone_number_verified`。<br>- `offline_access`: 如果存在此参数，token 接口会返回 `refresh_token` 字段。<br>- `roles`: 返回用户的角色列表。<br>- `external_id`: 用户在原有系统的用户 ID。<br>- `extended_fields`: 返回用户的扩展字段信息，内容为一个对象，key 为扩展字段名，value 为扩展字段值。<br>- `tenant_id`: 返回用户的租户 ID。<br> |
| clientIp            | String       | 否                                     | 客户端真实 IP 地址。默认情况下，GenAuth 会将请求来源的 IP 识别为用户登录的 IP 地址，如果你在后端服务器中调用此接口，需要将此 IP 设置为用户的真实请求 IP。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `192.168.0.1`                         |
| context             | String       | 否                                     | 额外请求上下文，将会传递到认证前和认证后的 [Pipeline](https://docs.genauth.ai/guides/pipeline/) 的 `context` 对象中。了解[如何在 Pipeline 的 `context` 参数中获取传入的额外 context](https://docs.genauth.ai/guides/pipeline/context-object.html)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `{"source":"utm"}`                    |
| tenantId            | String       | 否                                     | 租户 ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `625783d629f2bd1f5ddddd98c`           |
| customData          | NSDictionary | 否                                     | 设置额外的用户自定义数据，你需要先在 GenAuth 控制台[配置自定义数据](https://docs.genauth.ai/guides/users/user-defined-field/)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `{"school":"pku","age":"20"}`         |
| autoRegister        | Bool         | 否                                     | 是否开启自动注册。如果设置为 `true`，当用户不存在的时候，会先自动为其创建一个账号。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                       |
| passwordEncryptType | String       | 否                                     | 密码加密类型，支持 `sm2` 和 `rsa`。默认可以不加密。<br>- `none`: 不对密码加密，使用明文传输。<br>- `rsa`: 使用 RSA256 算法对密码加密。<br>- `sm2`: 使用国密 SM2 算法。<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | sm2                                   |

**示例**

```swift
let options = LoginOptions()
options.passwordEncryptType = .NONE
AuthClient().registerByUsername(username: "test", password: "password", options) { res in
    // res.data
}
```

<br>

## RegisterOptions

登录可选参数

| 名称                                  | 类型         | <div style="width:80px">是否必填</div> | <div style="width:300px">描述</div>                                                                                                                                        | <div style="width:200px">示例值</div>                    |
| ------------------------------------- | ------------ | -------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- |
| clientIp                              | String       | 否                                     | 客户端 IP                                                                                                                                                                  | `192.168.0.1`                                            |
| phonePassCodeForInformationCompletion | String       | 否                                     | 用于注册时补全用户信息的短信验证码                                                                                                                                         | `1234`                                                   |
| emailPassCodeForInformationCompletion | String       | 否                                     | 用于注册时补全用户信息的邮箱验证码                                                                                                                                         | `1234`                                                   |
| context                               | NSDictionary | 是                                     | 登录/注册时传的额外参数，会存到用户自定义字段里面                                                                                                                          | `{"phoneNumber":"188xxxx8888","phoneCountryCode":"+86"}` |
| passwordEncryptType                   | String       | 否                                     | 密码加密类型，支持 `sm2` 和 `rsa`。默认可以不加密。<br>- `none`: 不对密码加密，使用明文传输。<br>- `rsa`: 使用 RSA256 算法对密码加密。<br>- `sm2`: 使用国密 SM2 算法。<br> | sm2                                                      |
| profile                               | NSDictionary | 否                                     | 用户资料                                                                                                                                                                   | `192.168.0.1`                                            |

**示例**

```swift
let option = RegisterOptions()
option.passwordEncryptType = .NONE
AuthClient().registerByUsername(username: "test", password: "password", options) { res in
    // res.data
}
```

<br>

## AuthRequest

OIDC 可选参数
| 名称 | 类型 | <div style="width:80px">是否必填</div> | <div style="width:300px">描述</div> | <div style="width:200px">示例值</div> |
| ---- | ---- | ---- | ---- | ---- |
| scope | String | 否 | 需要请求的权限，必须包含 `openid`。如果需要获取手机号和 email 需要包含 `phone` `email`；如果需要 refresh_token 需要包含 `offline_access`。多个 `scope` 请用空格分隔。`id_token` 解码后的内容中会包含这些 `scope` 对应的用户信息相关的字段。<br> - `openid`: 必须包含。<br> - `profile`: 返回 `birthdate`、`family_name`、`gender`、`given_name`、`locale`，`middle_name`、`name`、`nickname`、`picture`、`preferred_username`、`profile`，`updated_at`、`website`、`zoneinfo` 字段。<br>- `username`: 返回 `username`。<br>- `email`: 返回 `email`、`email_verified`。<br>- `phone`: 返回 `phone_number`、`phone_number_verified`。<br>- `offline_access`: 如果存在此参数，token 接口会返回 `refresh_token` 字段。<br>- `roles`: 返回用户的角色列表。<br>- `external_id`: 用户在原有系统的用户 ID。<br>- `extended_fields`: 返回用户的扩展字段信息，内容为一个对象，key 为扩展字段名，value 为扩展字段值。<br>- `tenant_id`: 返回用户的租户 ID。<br> |
| redirect_uri | String | 否 | 回调链接，用户在 OP 认证成功后，OP 会将授权码以 URL query 的形式发送到这个地址。这个值必须出现在控制台配置的回调地址中，否则 OP 不允许向该地址回调。 | `redirect_uri=https://you_domain.com/callback` |
<br>
