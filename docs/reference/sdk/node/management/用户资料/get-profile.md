# Get user information

<!--
Warning ⚠️:
Do not modify this document directly,
https://github.com/Authing/authing-docs-factory
Use this project to generate
-->

<LastUpdated />

This endpoint user gets user information. You need to bring the user's `access_token` in the request header. The GenAuth server will return the corresponding fields according to the `scope` in the user's `access_token`.

## Method name

`ManagementClient.getProfile`

## Request parameters

| Name              | Type    | <div style="width:80px">Required</div> | <div style="width:60px">Default value</div> | <div style="width:300px">Description</div> | <div style="width:200px">Sample value</div> |
| ----------------- | ------- | -------------------------------------- | ------------------------------------------- | ------------------------------------------ | ------------------------------------------- |
| withCustomData    | boolean | No                                     | -                                           | Get custom data                            | `true`                                      |
| withIdentities    | boolean | No                                     | -                                           | Get identities                             | `true`                                      |
| withDepartmentIds | boolean | No                                     | -                                           | Get department ID list                     | `true`                                      |

## Sample code

```ts
import { AuthenticationClient, Models } from "authing-node-sdk";

const authenticationClient = new AuthenticationClient({
  // Need to be replaced with your GenAuth AppId, Secret and Host
  appId: "GEN_AUTH_APP_ID",
  appSecret: "GEN_AUTH_APP_SECRET",
  appHost: "GEN_AUTH_APP_HOST",
});

(async () => {
  // Please call the login interface to get access_token first, and call the setAccessToken method to set access_token
  authenticationClient.setAccessToken("REPLACE_ME_WITH_REAL_ACCESS_TOKEN");

  const result = await authenticationClient.getProfile({
    withCustomData: true,
    withIdentities: true,
    withDepartmentIds: true,
  });

  console.log(JSON.stringify(result, null, 2));
})();
```

## Request response

Type: `UserSingleRespDto`

| Name       | Type                           | Description                                                                                                  |
| ---------- | ------------------------------ | ------------------------------------------------------------------------------------------------------------ |
| statusCode | number                         | Business status code, which can be used to determine whether the operation is successful. 200 means success. |
| message    | string                         | Description                                                                                                  |
| apiCode    | number                         | Segmented error code, which can be used to get the specific error type.                                      |
| requestId  | string                         | Request ID. Returned when the request fails.                                                                 |
| data       | <a href="#UserDto">UserDto</a> | Response data                                                                                                |

Sample result:

```json
{
  "statusCode": 200,
  "message": "Operation successful",
  "requestId": "934108e5-9fbf-4d24-8da1-c330328abd6c",
  "data": {
    "userId": "6229ffaxxxxxxxxcade3e3d9",
    "createdAt": "2022-07-03T02:20:30.000Z",
    "updatedAt": "2022-07-03T02:20:30.000Z",
    "status": "Activated",
    "workStatus": "Active",
    "externalId": "10010",
    "email": "test@example.com",
    "phone": "188xxxx8888",
    "phoneCountryCode": "+86",
    "username": "bob",
    "name": "Zhang San",
    "nickname": "xxxx",
    "photo": "https://files.authing.co/authing-console/default-user-avatar.png",
    "loginsCount": 3,
    "lastLogin": "2022-07-03T02:20:30.000Z",
    "lastIp": "127.0.0.1",
    "gender": "M",
    "emailVerified": true,
    "phoneVerified": true,
    "passwordLastSetAt": "2022-07-03T02:20:30.000Z",
    "birthdate": "2022-06-03",
    "country": "CN",
    "province": "BJ",
    "city": "BJ",
    "address": "Beijing Chaoyang",
    "streetAddress": "Beijing Chaoyang District xxx Street",
    "postalCode": "438100",
    "company": "steamory",
    "browser": "Mozilla/5.0 (Linux; Android 10; V2001A; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/87.0.4280.141 Mobile Safari/537.36 VivoBrowser/10.2.10.0",
    "device": "iOS",
    "givenName": "xx",
    "familyName": "xx",
    "userSourceType": "register",
    "passwordSecurityLevel": 1,
    "departmentIds": "[\"624d930c3xxxx5c08dd4986e\",\"624d93102xxxx012f33cd2fe\"]",
    "identities": {
      "identityId": "62299d8b866d2dab79a89dc4",
      "extIdpId": "6076bacxxxxxxxxd80d993b5",
      "provider": "wechat",
      "type": "openid",
      "userIdInIdp": "oj7Nq05R-RRaqak0_YlMLnnIwsvg",
      "userInfoInIdp": {},
      "accessToken": "57_fK0xgSL_NwVlS-gmUwlMQ2N6AONNIOAYxxxx",
      "refreshToken": "57_IZFu91Ak1Wg6DRytZFFIOd3upNF5lH7vPxxxxx",
      "originConnIds": "[\"605492ac41xxxxe0362f0707\"]"
    },
    "customData": {
      "school": "Peking University",
      "age": 22
    },
    "statusChangedAt": "2022-07-03T02:20:30.000Z"
  }
}
```

## Data Structure

### <a id="UserDto"></a> UserDto

| Name                     | Type    | <div style="width:80px">Is it required</div> | <div style="width:300px">Description</div>                                                                                                                                                                                                                                                                                                                                                      | <div style="width:200px">Sample value</div>                                                                                                                      |
| ------------------------ | ------- | -------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| userId                   | string  | Yes                                          | User unique identifier, which can be user ID, user name, email address, mobile phone number, external ID, or ID in an external identity source.                                                                                                                                                                                                                                                 | `6229ffaxxxxxxxxcade3e3d9`                                                                                                                                       |
| createdAt                | string  | yes                                          | creation time                                                                                                                                                                                                                                                                                                                                                                                   | `2022-07-03T02:20:30.000Z`                                                                                                                                       |
| updatedAt                | string  | yes                                          | update time                                                                                                                                                                                                                                                                                                                                                                                     | `2022-07-03T02:20:30.000Z`                                                                                                                                       |
| status                   | string  | yes                                          | current status of the account                                                                                                                                                                                                                                                                                                                                                                   | Suspended                                                                                                                                                        |
| workStatus               | string  | yes                                          | current work status of the account                                                                                                                                                                                                                                                                                                                                                              | Closed                                                                                                                                                           |
| externalId               | string  | no                                           | third-party external ID                                                                                                                                                                                                                                                                                                                                                                         | `10010`                                                                                                                                                          |
| email                    | string  | no                                           | email address, case-insensitive                                                                                                                                                                                                                                                                                                                                                                 | `test@example.com`                                                                                                                                               |
| phone                    | string  | no                                           | mobile number without area code. If it is a foreign mobile number, please specify the area code in the phoneCountryCode parameter.                                                                                                                                                                                                                                                              | `188xxxx8888`                                                                                                                                                    |
| phoneCountryCode         | string  | No                                           | Mobile phone area code. This field is optional for mainland China mobile phone numbers. The GenAuth SMS service does not yet support international mobile phone numbers. You need to configure the corresponding international SMS service in the GenAuth console. For a complete list of mobile phone area codes, please refer to https://en.wikipedia.org/wiki/List_of_country_calling_codes. | `+86`                                                                                                                                                            |
| username                 | string  | No                                           | User name, unique in the user pool                                                                                                                                                                                                                                                                                                                                                              | `bob`                                                                                                                                                            |
| name                     | string  | No                                           | User's real name, not unique                                                                                                                                                                                                                                                                                                                                                                    | `Zhang San`                                                                                                                                                      |
| nickname                 | string  | no                                           | Nickname                                                                                                                                                                                                                                                                                                                                                                                        | `Zhang San`                                                                                                                                                      |
| photo                    | string  | no                                           | Avatar link                                                                                                                                                                                                                                                                                                                                                                                     | `https://files.authing.co/authing-console/default-user-avatar.png`                                                                                               |
| loginsCount              | number  | no                                           | Total number of historical logins                                                                                                                                                                                                                                                                                                                                                               | `3`                                                                                                                                                              |
| lastLogin                | string  | no                                           | Last login time                                                                                                                                                                                                                                                                                                                                                                                 | `2022-07-03T02:20:30.000Z`                                                                                                                                       |
| lastIp                   | string  | no                                           | Last login IP                                                                                                                                                                                                                                                                                                                                                                                   | `127.0.0.1`                                                                                                                                                      |
| gender                   | string  | yes                                          | Gender:<br>- `M`: Male, `male`<br>- `F`: Female, `female`<br>- `U`: Unknown, `unknown`<br>                                                                                                                                                                                                                                                                                                      | M                                                                                                                                                                |
| emailVerified            | boolean | yes                                          | Is the email verified                                                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                                                                                           |
| phoneVerified            | boolean | yes                                          | Is the phone number verified?                                                                                                                                                                                                                                                                                                                                                                   | `true`                                                                                                                                                           |
| passwordLastSetAt        | string  | no                                           | The time when the user last changed his password                                                                                                                                                                                                                                                                                                                                                | `2022-07-03T02:20:30.000Z`                                                                                                                                       |
| birthdate                | string  | no                                           | Date of birth                                                                                                                                                                                                                                                                                                                                                                                   | `2022-06-03`                                                                                                                                                     |
| country                  | string  | no                                           | Country of residence                                                                                                                                                                                                                                                                                                                                                                            | `CN`                                                                                                                                                             |
| province                 | string  | No                                           | Province                                                                                                                                                                                                                                                                                                                                                                                        | `BJ`                                                                                                                                                             |
| city                     | string  | No                                           | City                                                                                                                                                                                                                                                                                                                                                                                            | `BJ`                                                                                                                                                             |
| address                  | string  | No                                           | Address                                                                                                                                                                                                                                                                                                                                                                                         | `Beijing Chaoyang`                                                                                                                                               |
| streetAddress            | string  | No                                           | Street Address                                                                                                                                                                                                                                                                                                                                                                                  | `Beijing Chaoyang District xxx Street`                                                                                                                           |
| postalCode               | string  | No                                           | Postal Code                                                                                                                                                                                                                                                                                                                                                                                     | `438100`                                                                                                                                                         |
| company                  | string  | No                                           | Company                                                                                                                                                                                                                                                                                                                                                                                         | `steamory`                                                                                                                                                       |
| browser                  | string  | No                                           | Last browser used for login UA                                                                                                                                                                                                                                                                                                                                                                  | `Mozilla/5.0 (Linux; Android 10; V2001A; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/87.0.4280.141 Mobile Safari/537.36 VivoBrowser/10.2.10.0` |
| device                   | string  | No                                           | Last login device                                                                                                                                                                                                                                                                                                                                                                               | `iOS`                                                                                                                                                            |
| givenName                | string  | No                                           | First name                                                                                                                                                                                                                                                                                                                                                                                      | `xx`                                                                                                                                                             |
| familyName               | string  | No                                           | Last name                                                                                                                                                                                                                                                                                                                                                                                       | `xx`                                                                                                                                                             |
| middleName               | string  | No                                           | Middle name                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                  |
| profile                  | string  | No                                           | Preferred Username                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                  |
| preferredUsername        | string  | No                                           | Preferred Username                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                  |
| website                  | string  | No                                           | User personal website                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                  |
| zoneinfo                 | string  | No                                           | User time zone information                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                  |
| locale                   | string  | No                                           | Locale                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                  |
| formatted                | string  | No                                           | Standard full address                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                  |
| region                   | string  | No                                           | User region                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                  |
| userSourceType           | string  | Yes                                          | Source type:<br>- `excel`: Imported through excel<br>- `register`: User self-registration<br>- `adminCreated`: Manual creation by administrator backend (including creating users using management API)<br>- `syncTask`: Synchronization task of sync center <br>                                                                                                                               | excel                                                                                                                                                            |
| userSourceId             | string  | No                                           | Application ID or synchronization task ID                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                  |
| lastLoginApp             | string  | No                                           | Application ID of the user's last login                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                  |
| mainDepartmentId         | string  | No                                           | User's primary department ID                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                  |
| lastMfaTime              | string  | No                                           | The time when the user last performed MFA authentication                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                  |
| passwordSecurityLevel    | number  | No                                           | User password security strength level                                                                                                                                                                                                                                                                                                                                                           | `1`                                                                                                                                                              |
| resetPasswordOnNextLogin | boolean | No                                           | Require password reset on next login                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                  |
| departmentIds            | array   | No                                           | User department ID list                                                                                                                                                                                                                                                                                                                                                                         | `["624d930c3xxxx5c08dd4986e","624d93102xxxx012f33cd2fe"]`                                                                                                        |
| identities               | array   | No                                           | External identity source Nested type: <a href="#IdentityDto">IdentityDto</a>.                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                  |
| customData               | object  | No                                           | User's extended field data                                                                                                                                                                                                                                                                                                                                                                      | `{"school":"Peking University","age":22}`                                                                                                                        |
| statusChangedAt          | string  | No                                           | User status last modified time                                                                                                                                                                                                                                                                                                                                                                  | `2022-07-03T02:20:30.000Z`                                                                                                                                       |

### <a id="IdentityDto"></a> IdentityDto

| Name | Type | <div style="width:80px">Is it required</div> | <div style="width:300px">Description</div> | <div style="width:200px">Sample value</div> |
| ------------- | ------ | -------------------------------------- | -------------------------- ...| `62299d8b866d2dab79a89dc4` |
| extIdpId | string | yes | Identity source connection ID | `6076bacxxxxxxxxd80d993b5` |
| provider | string | yes | External identity source type:<br>- `wechat`: WeChat<br>- `qq`: QQ<br>- `wechatwork`: WeChat for Business<br>- `dingtalk`: DingTalk<br>- `weibo`: Weibo<br>- `github`: GitHub<br>- `alipay`: Alipay<br>- `baidu`: Baidu<br>- `lark`: Feishu<br>- `welink`: Welink<br>- `yidun`: NetEase Yidun<br>- `qingcloud`: Qingyun<br>- `google`: Google<br>- `gitlab`: GitLab<br>- `gitee`: Gitee<br>- `twitter`: Twitter<br>- `facebook`: Facebook<br>- `slack`: Slack<br>- `linkedin`: Linkedin<br>- `instagram`: Instagram<br>- `oidc`: OIDC-based enterprise identity source<br>- `oauth2`: OAuth2-based enterprise identity source<br>- `saml`: SAML-based enterprise identity source<br>- `ldap`: LDAP-based enterprise identity source<br>- `ad`: AD-based enterprise identity source<br>- `cas`: CAS-based enterprise identity source<br>- `azure-ad`: Azure AD-based enterprise identity source<br> | oidc |
| type | string | yes | Identity type, such as unionid, openid, primary | `openid` |
| userIdInIdp | string | yes | ID in the external identity source | `oj7Nq05R-RRaqak0_YlMLnnIwsvg` |
| userInfoInIdp | | Yes | User's identity information in idp Nested type: <a href="#User">User</a>. | |
| accessToken | string | No | Access Token in the external identity source (this parameter is only returned when the user actively obtains it, and the management side interface will not return it). | `57_fK0xgSL_NwVlS-gmUwlMQ2N6AONNIOAYxxxx` |
| refreshToken |string | No | Refresh Token in the external identity source (this parameter is only returned when the user actively obtains it, and will not be returned by the management interface). | `57_IZFu91Ak1Wg6DRytZFFIOd3upNF5lH7vPxxxxx` |
| originConnIds | array | Yes | List of identity source connection IDs from which the identity comes | `["605492ac41xxxxe0362f0707"]` |

### <a id="User"></a> User

| Name | Type | <div style="width:80px">Is it required</div> | <div style="width:300px">Description</div> | <div style="width:200px">Sample value</div> |
| ---- | ---- | -------------------------------------------- | ------------------------------------------ | ------------------------------------------- |
